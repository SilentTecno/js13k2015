"use strict";var game=game||{};game.helpers={getBrowserLimits:function(){var d=document.documentElement,c=$("body")[0],a=window.innerWidth||d.clientWidth||c.clientWidth,b=window.innerHeight||d.clientHeight||c.clientHeight;return{width:a,height:b}},isEmpty:function(a){return(typeof a==="undefined"||a===null||a==="")},Array:function(){if(!Array.prototype.exists){Array.prototype.exists=function(f){var a=false,b=false,e=0,d=0,c=null;for(e=0,d=this.length;e<d;e++){b=true;for(c in f){if(typeof this[e][c]!=="undefined"&&typeof f[c]!=="undefined"){if(this[e][c]!==f[c]){b=false;break}}}if(b){a=b;break}}return a}}if(!Array.prototype.find){Array.prototype.find=function(a){if(this==null){throw new TypeError("Array.prototype.find called on null or undefined")}if(typeof a!=="function"){throw new TypeError("predicate must be a function")}var f=Object(this);var d=f.length>>>0;var b=arguments[1];var e;for(var c=0;c<d;c++){e=f[c];if(a.call(b,e,c,f)){return e}}return undefined}}Array.prototype.findBy=function(f,e){var d=Object(this);var c=d.length>>>0;var b;for(var a=0;a<c;a++){b=d[a];if(b[f]==e){return b}}return undefined};return Array},Object:function(){if(!Object.prototype.extend){Object.prototype.extend=function(b){for(var a in b){if(b.hasOwnProperty(a)){this[a]=b[a]}}}}return Object}};if(typeof module!=="undefined"){module.exports=game.helpers}else{window.requestAnimFrame=(function(a){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b){window.setTimeout(b,1000/60)}})();var $=(function(){function a(c){var b=null;if(c&&typeof c==="string"){if(c.length>1){if(c[0]==="#"){b=c.substring(1,c.length);return document.getElementById(b)}else{if(c[0]==="."){b=c.substring(1,c.length);return document.getElementsByClassName(b)}else{return document.getElementsByTagName(c)}}}else{if(c.length>0){return document.getElementsByTagName(c)}}}}return a})()}"use strict";var game=game||{};game.events={playerConnect:"player_connect",newPlayer:"new_player",playerWelcome:"player_welcome",playerList:"player_list",gameInfo:"game_info"};if(typeof module!=="undefined"){module.exports=game.events}"use strict";var game=game||{},thatG=game;game.client=(function(){var b=this;var a=function(d){var k=this;this.players=[];this.gameInfo={};this.connected=false;this.canvas={};this.socket={};if(d){if(d.canvasId){k.canvas=new thatG.canvas({canvas:$(d.canvasId)})}}var c=thatG.helpers.getBrowserLimits(),l=thatG.events;this.load=function(){e();k.canvas.init(c)};this.disconnect=function(){k.socket.disconnect();k.playerName="";k.connected=false};function e(){var n=sessionStorage.playerName;k.playerName=n;if(thatG.helpers.isEmpty(n)){$(".game__welcome")[0].style.display="flex";$(".game__welcome__text")[0].focus();$(".game__welcome__button")[0].onclick=h}else{$(".game__welcome")[0].style.display="none";m()}}function h(){var o=$(".game__welcome__text")[0].value;var n=new RegExp(/\w+/g);if(n.test(o)){$(".game__welcome")[0].style.display="none";sessionStorage.playerName=o;k.playerName=o;m()}else{alert("Player Name not valid.")}}function m(){console.log("connecting...");if(!k.socket.conected||k.socket.conected===false){k.socket=io("");k.socket.connect()}k.socket.on(l.playerWelcome,i);k.socket.on(l.playerList,g);k.socket.on(l.gameInfo,f)}function i(n){console.log(l.playerConnect);k.connected=true;k.socket.emit(l.playerConnect,{id:n.id,name:sessionStorage.playerName})}function g(n){console.log(l.playerList);k.players=n}function f(n){console.log(l.gameInfo);k.gameInfo=n;k.canvas.setGrid(n.dimension.cols,n.dimension.rows)}function j(){return"Player "+Math.random().toString().replace(/.*\./,"")}};return a})();"use strict";var game=game||{};game.canvas=(function(){var a=null,d=0,c=0;var b=function(f){if(f){if(f.canvas){a=f.canvas}}this.init=function(){e(a)};this.setGrid=function(h,g){d=h;c=g;console.log(d+" "+c)}};function e(g){if(g){var f=game.helpers.getBrowserLimits();g.width=(f.width*0.9)-2;g.height=(f.height*0.9)-2;g.style.marginLeft=(f.width*0.05)+"px";g.style.marginTop=(f.height*0.05)+"px"}}return b})();"use strict";var game=game||{};game.player=(function(){var a=function(b){if(b){this.socket=b}this.id=0;this.name=""};return a})();if(typeof module!=="undefined"){module.exports=game.player}"use strict";(function(){window.onload=function(){window.$g=new game.client({canvasId:"#game__canvas"});window.$g.load()}})();